<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Meu Painel - Portal AstrolÃ³gico</title>
    
    <!-- ============================================
         CSS - ORGANIZADO E SEPARADO
         ============================================ -->
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/dashboard.css">
    
    <!-- ============================================
         JAVASCRIPT
         ============================================ -->
    <script src="i18n.js"></script>
</head>
<body>
    <!-- Seletor de Idioma -->
    <div class="language-selector">
        <button onclick="window.i18n.changeLanguage('pt')" class="lang-btn" data-lang="pt">
            ğŸ‡§ğŸ‡· PT
        </button>
        <button onclick="window.i18n.changeLanguage('en')" class="lang-btn" data-lang="en">
            ğŸ‡ºğŸ‡¸ EN
        </button>
    </div>

    <div class="container">
        <!-- ==========================================
             HEADER DO DASHBOARD
             ========================================== -->
        <div class="dashboard-header">
            <div class="user-info">
                <h2 id="nomeUsuario" data-i18n="dashboard.header.hello">OlÃ¡, UsuÃ¡rio!</h2>
                <p id="emailUsuario"></p>
            </div>
            <button id="btnLogout" class="btn-logout" data-i18n="dashboard.header.btnLogout">
                Sair
            </button>
        </div>

        <!-- ==========================================
             SISTEMA DE TABS
             ========================================== -->
        <div class="dashboard-tabs">
            <button class="tab-btn active" data-tab="novo" data-i18n="dashboard.tabs.newMap">
                ğŸ”® Novo Mapa
            </button>
            <button class="tab-btn" data-tab="historico" data-i18n="dashboard.tabs.history">
                ğŸ“š HistÃ³rico
            </button>
            <button class="tab-btn" data-tab="perfil" data-i18n="dashboard.tabs.profile">
                ğŸ‘¤ Perfil
            </button>
        </div>

        <!-- ==========================================
             TAB 1: NOVO MAPA
             ========================================== -->
        <div id="tab-novo" class="tab-content active">
            <h2 data-i18n="dashboard.newMap.title">âœ¨ Consultar Novo Mapa Astral</h2>
            
            <form id="formAstrologia">
                <!-- Data de Nascimento -->
                <div class="form-section">
                    <h3 data-i18n="form.birthDate">ğŸ“… Data de Nascimento</h3>
                    <div class="form-row">
                        <div class="form-group">
                            <label data-i18n="form.day">Dia:</label>
                            <input type="number" id="dia" min="1" max="31" required>
                        </div>
                        <div class="form-group">
                            <label data-i18n="form.month">MÃªs:</label>
                            <input type="number" id="mes" min="1" max="12" required>
                        </div>
                        <div class="form-group">
                            <label data-i18n="form.year">Ano:</label>
                            <input type="number" id="ano" min="1900" max="2025" required>
                        </div>
                    </div>
                </div>

                <!-- Hora de Nascimento -->
                <div class="form-section">
                    <h3 data-i18n="form.birthTime">ğŸ• Hora de Nascimento</h3>
                    <div class="form-row">
                        <div class="form-group">
                            <label data-i18n="form.hour">Hora:</label>
                            <input type="number" id="hora" min="0" max="23" required>
                        </div>
                        <div class="form-group">
                            <label data-i18n="form.minutes">Minutos:</label>
                            <input type="number" id="minutos" min="0" max="59" required>
                        </div>
                    </div>
                </div>

                <!-- Local de Nascimento -->
                <div class="form-section">
                    <h3 data-i18n="form.birthPlace">ğŸ“ Local de Nascimento</h3>
                    
                    <div class="form-group">
                        <label data-i18n="form.city">Cidade (opcional):</label>
                        <input 
                            type="text" 
                            id="cidade" 
                            data-i18n-placeholder="form.cityPlaceholder"
                            placeholder="Ex: SÃ£o Paulo"
                        >
                    </div>
                    
                    <div class="form-group">
                        <label data-i18n="form.latitude">Latitude:</label>
                        <input 
                            type="number" 
                            id="latitude" 
                            step="0.000001" 
                            data-i18n-placeholder="form.latitudePlaceholder"
                            placeholder="Ex: -23.5505" 
                            required
                        >
                        <small data-i18n="form.latitudeHelp">Use nÃºmeros negativos para Sul</small>
                    </div>
                    
                    <div class="form-group">
                        <label data-i18n="form.longitude">Longitude:</label>
                        <input 
                            type="number" 
                            id="longitude" 
                            step="0.000001" 
                            data-i18n-placeholder="form.longitudePlaceholder"
                            placeholder="Ex: -46.6333" 
                            required
                        >
                        <small data-i18n="form.longitudeHelp">Use nÃºmeros negativos para Oeste</small>
                    </div>
                    
                    <div class="form-group">
                        <label data-i18n="form.timezone">Fuso HorÃ¡rio:</label>
                        <input 
                            type="number" 
                            id="timezone" 
                            step="0.5" 
                            data-i18n-placeholder="form.timezonePlaceholder"
                            placeholder="Ex: -3" 
                            required
                        >
                        <small data-i18n="form.timezoneHelp">Ex: -3 para BrasÃ­lia, -5 para NY</small>
                    </div>
                </div>

                <!-- Checkbox Salvar -->
                <div class="form-group">
                    <label style="display: flex; align-items: center; gap: 10px; cursor: pointer;">
                        <input type="checkbox" id="salvar" checked>
                        <span data-i18n="form.saveMap">Salvar este mapa no meu histÃ³rico</span>
                    </label>
                </div>

                <!-- BotÃ£o Submit -->
                <button type="submit" class="btn-submit" data-i18n="form.btnSubmit">
                    ğŸ”® Consultar Mapa Astral
                </button>
            </form>

            <!-- Loading -->
            <div id="loading" class="loading" style="display: none;">
                <div class="spinner"></div>
                <p data-i18n="loading.text">Consultando as estrelas...</p>
            </div>

            <!-- Resultado -->
            <div id="resultado" class="resultado" style="display: none;">
                <h2 data-i18n="result.title">ğŸŒ™ Seu Mapa Astral</h2>
                
                <div class="card-principal">
                    <h3 id="signosSolLuaAsc"></h3>
                    <p id="mensagemHoroscopo"></p>
                </div>

                <div class="planetas-grid">
                    <h3 data-i18n="result.planetsTitle">ğŸª PosiÃ§Ã£o dos Planetas</h3>
                    <div id="listaPlanetas"></div>
                </div>

                <!-- âœ¨ BOTÃƒO PARA GERAR IMAGEM âœ¨ -->
                <div class="image-actions">
                    <button id="btnGerarImagem" class="btn-download-image">
                        ğŸ¨ Gerar Imagem do Mapa
                    </button>
                </div>

                <!-- Preview da Imagem -->
                <div id="imagePreview" class="image-preview" style="display: none;">
                    <h3>âœ¨ Sua Imagem Personalizada</h3>
                    <img id="mapaImage" src="" alt="Mapa Astral">
                    <div class="image-actions">
                        <button id="btnBaixarImagem" class="btn-download-image">
                            ğŸ“¥ Baixar Imagem
                        </button>
                        <button id="btnCompartilhar" class="btn-share-image">
                            ğŸ”— Compartilhar
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- ==========================================
             TAB 2: HISTÃ“RICO
             ========================================== -->
        <div id="tab-historico" class="tab-content">
            <h2 data-i18n="dashboard.history.title">ğŸ“š Meus Mapas Salvos</h2>
            <div id="mapasLista" class="mapas-grid"></div>
        </div>

        <!-- ==========================================
             TAB 3: PERFIL
             ========================================== -->
        <div id="tab-perfil" class="tab-content">
            <h2 data-i18n="dashboard.profile.title">ğŸ‘¤ Meu Perfil</h2>
            
            <div class="form-section">
                <form id="formPerfil">
                    <div class="form-group">
                        <label data-i18n="dashboard.profile.name">Nome:</label>
                        <input type="text" id="perfilNome">
                    </div>
                    
                    <div class="form-group">
                        <label data-i18n="dashboard.profile.email">Email:</label>
                        <input type="email" id="perfilEmail" disabled>
                    </div>
                    
                    <button type="submit" class="btn-submit" data-i18n="dashboard.profile.btnSubmit">
                        Atualizar Perfil
                    </button>
                </form>
            </div>
        </div>
    </div>

    <!-- ============================================
         JAVASCRIPT - LÃ³gica do Dashboard
         ============================================ -->
    <script src="mapa-astral-image.js"></script>
    <script src="dashboard.js"></script>
    <script>
        // Marcar idioma ativo
        const currentLang = localStorage.getItem('language') || 'pt';
        document.querySelectorAll('.lang-btn').forEach(btn => {
            if (btn.dataset.lang === currentLang) {
                btn.classList.add('active');
            }
        });
    </script>
</body>
</html>